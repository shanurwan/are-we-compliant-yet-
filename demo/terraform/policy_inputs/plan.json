{"format_version":"1.2","terraform_version":"1.12.2","variables":{"allowed_regions":{"value":["ap-southeast-1"]},"db_password":{"value":"juEmTlYNEiNIosK+"},"db_username":{"value":"bnmadmin"},"project_name":{"value":"bnm-iac-demo"},"region":{"value":"ap-southeast-1"}},"planned_values":{"outputs":{"bucket_arn":{"sensitive":false},"bucket_name":{"sensitive":false},"db_endpoint":{"sensitive":false},"db_identifier":{"sensitive":false},"log_group_name":{"sensitive":false,"type":"string","value":"/bnm/bnm-iac-demo-ap-southeast-1"},"region":{"sensitive":false,"type":"string","value":"ap-southeast-1"}},"root_module":{"resources":[{"address":"aws_cloudwatch_log_group.app","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"/bnm/bnm-iac-demo-ap-southeast-1","region":"ap-southeast-1","retention_in_days":400,"skip_destroy":false,"tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_db_instance.db","mode":"managed","type":"aws_db_instance","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_subnet_group_name":"bnm-iac-demo-ap-southeast-1-db-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":["postgresql"],"engine":"postgres","engine_version":"16.3","final_snapshot_identifier":null,"iam_database_authentication_enabled":true,"identifier":"bnm-iac-demo-ap-southeast-1-db","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":60,"multi_az":true,"password":"juEmTlYNEiNIosK+","password_wo":null,"password_wo_version":null,"performance_insights_enabled":true,"publicly_accessible":false,"region":"ap-southeast-1","replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":true,"tags":null,"timeouts":null,"upgrade_storage_config":null,"username":"bnmadmin"},"sensitive_values":{"blue_green_update":[],"enabled_cloudwatch_logs_exports":[false],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_db_subnet_group.db","mode":"managed","type":"aws_db_subnet_group","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"bnm-iac-demo-ap-southeast-1-db-subnets","region":"ap-southeast-1","subnet_ids":["subnet-001f558d82f3aa080","subnet-06fe7e98bcc5e8232","subnet-0e1c59d08d1306449"],"tags":null},"sensitive_values":{"subnet_ids":[false,false,false],"supported_network_types":[],"tags_all":{}}},{"address":"aws_iam_policy.s3_readonly","mode":"managed","type":"aws_iam_policy","name":"s3_readonly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Least privilege RO access to demo bucket","name":"bnm-iac-demo-ap-southeast-1-s3-ro","path":"/","tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_role.app_role","mode":"managed","type":"aws_iam_role","name":"app_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"bnm-iac-demo-ap-southeast-1-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role.rds_monitoring","mode":"managed","type":"aws_iam_role","name":"rds_monitoring","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"monitoring.rds.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"bnm-iac-demo-ap-southeast-1-rds-monitoring","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role_policy_attachment.attach_ro","mode":"managed","type":"aws_iam_role_policy_attachment","name":"attach_ro","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"bnm-iac-demo-ap-southeast-1-role"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.rds_monitoring_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"rds_monitoring_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonRDSEnhancedMonitoringRole","role":"bnm-iac-demo-ap-southeast-1-rds-monitoring"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_kms_key.logs","mode":"managed","type":"aws_kms_key","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"KMS key for CloudWatch Logs encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","region":"ap-southeast-1","tags":null,"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_kms_key.pi","mode":"managed","type":"aws_kms_key","name":"pi","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"KMS for RDS Performance Insights","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","region":"ap-southeast-1","tags":null,"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"region":"ap-southeast-1","tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_server_side_encryption_configuration.data","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"region":"ap-southeast-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}},{"address":"aws_s3_bucket_versioning.data","mode":"managed","type":"aws_s3_bucket_versioning","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"region":"ap-southeast-1","versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}},{"address":"data.aws_iam_policy_document.s3_ro","mode":"data","type":"aws_iam_policy_document","name":"s3_ro","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject","s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null],"sid":null}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false]}]}},{"address":"null_resource.gen_plan","mode":"managed","type":"null_resource","name":"gen_plan","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"region":"ap-southeast-1"}},"sensitive_values":{"triggers":{}}},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"byte_length":2,"keepers":null,"prefix":null},"sensitive_values":{}}]}},"resource_changes":[{"address":"data.aws_iam_policy_document.s3_ro","mode":"data","type":"aws_iam_policy_document","name":"s3_ro","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject","s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null],"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true,true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false]}]}},"action_reason":"read_because_config_unknown"},{"address":"aws_cloudwatch_log_group.app","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"/bnm/bnm-iac-demo-ap-southeast-1","region":"ap-southeast-1","retention_in_days":400,"skip_destroy":false,"tags":null},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"log_group_class":true,"name_prefix":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_db_instance.db","mode":"managed","type":"aws_db_instance","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_subnet_group_name":"bnm-iac-demo-ap-southeast-1-db-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":["postgresql"],"engine":"postgres","engine_version":"16.3","final_snapshot_identifier":null,"iam_database_authentication_enabled":true,"identifier":"bnm-iac-demo-ap-southeast-1-db","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":60,"multi_az":true,"password":"juEmTlYNEiNIosK+","password_wo":null,"password_wo_version":null,"performance_insights_enabled":true,"publicly_accessible":false,"region":"ap-southeast-1","replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":true,"tags":null,"timeouts":null,"upgrade_storage_config":null,"username":"bnmadmin"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_retention_period":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"database_insights_mode":true,"db_name":true,"domain_fqdn":true,"enabled_cloudwatch_logs_exports":[false],"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"parameter_group_name":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"storage_type":true,"tags_all":true,"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"enabled_cloudwatch_logs_exports":[false],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_db_subnet_group.db","mode":"managed","type":"aws_db_subnet_group","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"bnm-iac-demo-ap-southeast-1-db-subnets","region":"ap-southeast-1","subnet_ids":["subnet-001f558d82f3aa080","subnet-06fe7e98bcc5e8232","subnet-0e1c59d08d1306449"],"tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":[false,false,false],"supported_network_types":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[false,false,false],"supported_network_types":[],"tags_all":{}}}},{"address":"aws_iam_policy.s3_readonly","mode":"managed","type":"aws_iam_policy","name":"s3_readonly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Least privilege RO access to demo bucket","name":"bnm-iac-demo-ap-southeast-1-s3-ro","path":"/","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_iam_role.app_role","mode":"managed","type":"aws_iam_role","name":"app_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"bnm-iac-demo-ap-southeast-1-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role.rds_monitoring","mode":"managed","type":"aws_iam_role","name":"rds_monitoring","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"monitoring.rds.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"bnm-iac-demo-ap-southeast-1-rds-monitoring","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role_policy_attachment.attach_ro","mode":"managed","type":"aws_iam_role_policy_attachment","name":"attach_ro","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"bnm-iac-demo-ap-southeast-1-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.rds_monitoring_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"rds_monitoring_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonRDSEnhancedMonitoringRole","role":"bnm-iac-demo-ap-southeast-1-rds-monitoring"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_kms_key.logs","mode":"managed","type":"aws_kms_key","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"KMS key for CloudWatch Logs encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","region":"ap-southeast-1","tags":null,"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"rotation_period_in_days":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_kms_key.pi","mode":"managed","type":"aws_kms_key","name":"pi","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"description":"KMS for RDS Performance Insights","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","region":"ap-southeast-1","tags":null,"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"rotation_period_in_days":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"region":"ap-southeast-1","tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_region":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.data","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"region":"ap-southeast-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"after_identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}}},{"address":"aws_s3_bucket_versioning.data","mode":"managed","type":"aws_s3_bucket_versioning","name":"data","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"region":"ap-southeast-1","versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]},"after_identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}}},{"address":"null_resource.gen_plan","mode":"managed","type":"null_resource","name":"gen_plan","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"region":"ap-southeast-1"}},"after_unknown":{"id":true,"triggers":{}},"before_sensitive":false,"after_sensitive":{"triggers":{}}}},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"byte_length":2,"keepers":null,"prefix":null},"after_unknown":{"b64_std":true,"b64_url":true,"dec":true,"hex":true,"id":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"bucket_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"bucket_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_identifier":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"log_group_name":{"actions":["create"],"before":null,"after":"/bnm/bnm-iac-demo-ap-southeast-1","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"region":{"actions":["create"],"before":null,"after":"ap-southeast-1","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.12.2","values":{"outputs":{"log_group_name":{"sensitive":false,"value":"/bnm/bnm-iac-demo-ap-southeast-1","type":"string"},"region":{"sensitive":false,"value":"ap-southeast-1","type":"string"}},"root_module":{"resources":[{"address":"data.aws_iam_policy_document.ec2_assume_role","mode":"data","type":"aws_iam_policy_document","name":"ec2_assume_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2851119427","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.rds_monitoring_trust","mode":"data","type":"aws_iam_policy_document","name":"rds_monitoring_trust","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"76086537","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"monitoring.rds.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"monitoring.rds.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["monitoring.rds.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_subnets.default","mode":"data","type":"aws_subnets","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"vpc-id","values":["vpc-06de83979819c245c"]}],"id":"ap-southeast-1","ids":["subnet-06fe7e98bcc5e8232","subnet-001f558d82f3aa080","subnet-0e1c59d08d1306449"],"region":"ap-southeast-1","tags":null,"timeouts":null},"sensitive_values":{"filter":[{"values":[false]}],"ids":[false,false,false]}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:ap-southeast-1:440536347967:vpc/vpc-06de83979819c245c","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-05067c3bbfc2b7f02","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-0941276b244255049","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-06de83979819c245c","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-02f4ecd8490ba1d12","owner_id":"440536347967","region":"ap-southeast-1","state":null,"tags":{},"timeouts":null},"sensitive_values":{"cidr_block_associations":[{}],"tags":{}}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 5.0.0","expressions":{"region":{"references":["var.region"]}}},"null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null"},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random"}},"root_module":{"outputs":{"bucket_arn":{"expression":{"references":["aws_s3_bucket.data.arn","aws_s3_bucket.data"]},"description":"ARN of the data bucket"},"bucket_name":{"expression":{"references":["aws_s3_bucket.data.bucket","aws_s3_bucket.data"]},"description":"Primary S3 bucket for demo data (versioned + SSE)"},"db_endpoint":{"expression":{"references":["aws_db_instance.db.address","aws_db_instance.db"]},"description":"RDS writer endpoint (no creds included)"},"db_identifier":{"expression":{"references":["aws_db_instance.db.id","aws_db_instance.db"]},"description":"RDS instance identifier (encrypted, non-public)"},"log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.app.name","aws_cloudwatch_log_group.app"]},"description":"CloudWatch log group for baseline audit logs"},"region":{"expression":{"references":["var.region"]},"description":"Deployment region (enforced by policy for data residency)"}},"resources":[{"address":"aws_cloudwatch_log_group.app","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["aws_kms_key.logs.arn","aws_kms_key.logs"]},"name":{"references":["local.name"]},"retention_in_days":{"constant_value":400}},"schema_version":0},{"address":"aws_db_instance.db","mode":"managed","type":"aws_db_instance","name":"db","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":20},"db_subnet_group_name":{"references":["aws_db_subnet_group.db.name","aws_db_subnet_group.db"]},"deletion_protection":{"constant_value":true},"enabled_cloudwatch_logs_exports":{"constant_value":["postgresql"]},"engine":{"constant_value":"postgres"},"engine_version":{"constant_value":"16.3"},"iam_database_authentication_enabled":{"constant_value":true},"identifier":{"references":["local.name"]},"instance_class":{"constant_value":"db.t3.micro"},"monitoring_interval":{"constant_value":60},"monitoring_role_arn":{"references":["aws_iam_role.rds_monitoring.arn","aws_iam_role.rds_monitoring"]},"multi_az":{"constant_value":true},"password":{"references":["var.db_password"]},"performance_insights_enabled":{"constant_value":true},"performance_insights_kms_key_id":{"references":["aws_kms_key.pi.arn","aws_kms_key.pi"]},"publicly_accessible":{"constant_value":false},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":true},"username":{"references":["var.db_username"]}},"schema_version":2},{"address":"aws_db_subnet_group.db","mode":"managed","type":"aws_db_subnet_group","name":"db","provider_config_key":"aws","expressions":{"name":{"references":["local.name"]},"subnet_ids":{"references":["data.aws_subnets.default.ids","data.aws_subnets.default"]}},"schema_version":0},{"address":"aws_iam_policy.s3_readonly","mode":"managed","type":"aws_iam_policy","name":"s3_readonly","provider_config_key":"aws","expressions":{"description":{"constant_value":"Least privilege RO access to demo bucket"},"name":{"references":["local.name"]},"policy":{"references":["data.aws_iam_policy_document.s3_ro.json","data.aws_iam_policy_document.s3_ro"]}},"schema_version":0},{"address":"aws_iam_role.app_role","mode":"managed","type":"aws_iam_role","name":"app_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ec2_assume_role.json","data.aws_iam_policy_document.ec2_assume_role"]},"name":{"references":["local.name"]}},"schema_version":0},{"address":"aws_iam_role.rds_monitoring","mode":"managed","type":"aws_iam_role","name":"rds_monitoring","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.rds_monitoring_trust.json","data.aws_iam_policy_document.rds_monitoring_trust"]},"name":{"references":["local.name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.attach_ro","mode":"managed","type":"aws_iam_role_policy_attachment","name":"attach_ro","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.s3_readonly.arn","aws_iam_policy.s3_readonly"]},"role":{"references":["aws_iam_role.app_role.name","aws_iam_role.app_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.rds_monitoring_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"rds_monitoring_attach","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonRDSEnhancedMonitoringRole"},"role":{"references":["aws_iam_role.rds_monitoring.name","aws_iam_role.rds_monitoring"]}},"schema_version":0},{"address":"aws_kms_key.logs","mode":"managed","type":"aws_kms_key","name":"logs","provider_config_key":"aws","expressions":{"description":{"constant_value":"KMS key for CloudWatch Logs encryption"},"enable_key_rotation":{"constant_value":true}},"schema_version":0},{"address":"aws_kms_key.pi","mode":"managed","type":"aws_kms_key","name":"pi","provider_config_key":"aws","expressions":{"description":{"constant_value":"KMS for RDS Performance Insights"},"enable_key_rotation":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_config_key":"aws","expressions":{"bucket":{"references":["local.name","random_id.suffix.hex","random_id.suffix"]}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.data","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"data","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.data.id","aws_s3_bucket.data"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}],"bucket_key_enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.data","mode":"managed","type":"aws_s3_bucket_versioning","name":"data","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.data.id","aws_s3_bucket.data"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"null_resource.gen_plan","mode":"managed","type":"null_resource","name":"gen_plan","provider_config_key":"null","expressions":{"triggers":{"references":["var.region"]}},"schema_version":0},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_config_key":"random","expressions":{"byte_length":{"constant_value":2}},"schema_version":0},{"address":"data.aws_iam_policy_document.ec2_assume_role","mode":"data","type":"aws_iam_policy_document","name":"ec2_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.rds_monitoring_trust","mode":"data","type":"aws_iam_policy_document","name":"rds_monitoring_trust","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["monitoring.rds.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.s3_ro","mode":"data","type":"aws_iam_policy_document","name":"s3_ro","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:GetObject","s3:ListBucket"]},"resources":{"references":["aws_s3_bucket.data.arn","aws_s3_bucket.data","aws_s3_bucket.data.arn","aws_s3_bucket.data"]}}]},"schema_version":0},{"address":"data.aws_subnets.default","mode":"data","type":"aws_subnets","name":"default","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.default.id","data.aws_vpc.default"]}}]},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"aws","expressions":{"default":{"constant_value":true}},"schema_version":0}],"variables":{"allowed_regions":{"default":["ap-southeast-1"],"description":"Regions allowed by policy"},"db_password":{"sensitive":true},"db_username":{"default":"bnmadmin"},"project_name":{"default":"bnm-iac-demo","description":"Project name prefix for resources"},"region":{"default":"ap-southeast-1","description":"AWS region for deployment (BNM 2023)."}}}},"relevant_attributes":[{"resource":"data.aws_iam_policy_document.rds_monitoring_trust","attribute":["json"]},{"resource":"random_id.suffix","attribute":["hex"]},{"resource":"aws_db_instance.db","attribute":["address"]},{"resource":"aws_db_subnet_group.db","attribute":["name"]},{"resource":"aws_iam_policy.s3_readonly","attribute":["arn"]},{"resource":"aws_iam_role.rds_monitoring","attribute":["name"]},{"resource":"data.aws_iam_policy_document.ec2_assume_role","attribute":["json"]},{"resource":"aws_db_instance.db","attribute":["id"]},{"resource":"aws_s3_bucket.data","attribute":["arn"]},{"resource":"aws_iam_role.rds_monitoring","attribute":["arn"]},{"resource":"aws_kms_key.pi","attribute":["arn"]},{"resource":"aws_s3_bucket.data","attribute":["id"]},{"resource":"data.aws_iam_policy_document.s3_ro","attribute":["json"]},{"resource":"aws_s3_bucket.data","attribute":["bucket"]},{"resource":"data.aws_subnets.default","attribute":["ids"]},{"resource":"aws_iam_role.app_role","attribute":["name"]},{"resource":"aws_cloudwatch_log_group.app","attribute":["name"]},{"resource":"aws_kms_key.logs","attribute":["arn"]}],"timestamp":"2025-09-09T23:17:58Z","applyable":true,"complete":true,"errored":false}
